---
title: Drupal-创建页面
date: 2016-04-30 
tags: [Drupal]
---
### 概要

在这一章中，将介绍在Drupal中的创建页面功能，包括创建基础页面，登录页面、页面里的视图等等

<!-- more -->
### 创建页面----第10章:创建页面


现在你已经对内容类型、区块、视图和主题有所了解了，你就具备了用这些元素集合到你的页面上。一个页面可能是一个单独的内容表现（例如：一个关于在DrupalCon的第一天的新闻），或者可能是一个表现一个像Drupal.org首页登录页面。
你的网站每一个页面可以是不同的结构，这要感谢你选择的灵活的网站主题以及区块机制和在哪个页面（网址URL）区块去显示的功能。使用视图来创建区块提供一个用于从静态的块通过块接口创建的静态块提取内容的动态机制。
Drupal8工具的组合提供了一个强大的机制，来创建一个优秀的网站。


#### 创建页面的基础

Drupal 8核心与你的主题的结合提供了所需的所有功能，在一个网站上创建一个典型的网页。 主题提供了可以包含的内容的区域，而Drupal 8核心的内容类型，区块，和视图提供了将创建的内容出现在哪些区域的机制。The 
在第六章你发现Bartik主题为您的网站的内容提供了区域容器。 作为一个回顾，图10-1描述了可用于放置内容和块的区域。
![](http://work.beiweng.org/d/file/drupal/chapter10/2016-04-09/38aa544905b1749bd28d6ebbd96bd32f.png)
图10-1 由Bartik主题提供区域
Bartik提供了17个我们可以放置内容和块的区域，包括典型的用于表现网站标志、搜索栏和主菜单导航元素的头部区域。Bartik只是Drupal.org里数百个主题之一，每个主题都有其自有的布置和区域数量。另外，你可以使用一个起始主题，如Zen主题，然后设计出你想要的布局和区域来达到你期望的网站样式。鉴于为了展示Drupal 8 的页面建设，我们将保持在Bartik主题提供的固定样式和区域中进行。
我们将创建的第一个页面是一个内容详细页面的一个例子，意思是单个的内容显示，可扩充的页面不是单个的内容，是相关联的各块在页面内组合。为了演示创建内容详细信息页面，我们将使用文章内容类型创建一篇文章，描述了即将到来的DrupalCon。登录后，导航到管理➤内容。在内容页中，单击“添加内容”按钮，选择文章。输入文章和正文的标题，并点击“保存并发布”按钮。注意与你的文章相关联的网址，因为你将用它来放置只出现在这篇文章页面的块，或使用该块接口来创建或分配一个块以出现在该页上。

此时所有被定义为整个网站范围的块都会显示在这个页面里，围绕在DrupalCon的文章周围。但是如果你想显示更多的其他有别于标准的区域和文章的内容呢？答案是使用视图从文章来生成区块显示.让我们首先创建通过“区块布局”页面自定义模块和指定该块只出现在DrupalCon页面上（见第八章复习一下关于块的内容）：
1.单击“顶部”菜单中的“管理”链接，然后按“二级”菜单中的“结构”链接。单击“区块布局”链接以显示“区块布局”页。
2.点击“添加自定义块”按钮来创建一个新的自定义块。
3.在“块描述”字段中，输入“DrupalCon洛杉矶2015。”
4.在主体里，输入“5月11-15，2015在洛杉矶会议中心。”
5.单击保存按钮。
6.在出现的“配置块”页面，找到区域选择列表并设置区域“Featured top”（如果你不使用Bartik，选择另一个突出的区块）。
7.要限制此块将出现在哪些页面，单击垂直导航栏中的页面标签，并在页面文本区域，输入与您创建，开始/节点本文相关的URL。在我的例子，那就是我写在网站上的第一篇文章，所以我会在框中输入 /node/1。接下来，单击“为下列页面显示”单选按钮，因为我们只希望这个块出现在您的文章页面上。
8.单击“保存块”按钮以保存新的块，然后通过单机第二级菜单中的内容链接返回到您正在使用的文章页面，然后单击内容列表中的标题。

在加入块你应该会看到类似图10-2
![](http://work.beiweng.org/d/file/drupal/chapter10/2016-04-09/bb4705e1ace9dc53146f80b374bdb1b9.png)
图10-2。给一篇文章详细页添加一个块



#### 创建登录页面
我们可以继续在这个页面的其他区域添加其他块的过程直到我们有内容和元素，我们要显示我们的目标用户，当他们登录到DrupalCon洛杉矶2015页时。 
登录页面通常是一个典型页面，是不关联的一个单一的内容，并可以在页面显示几个不同的内容和区块。
Drupal网站的主页是一个登陆页面的一个例子。
让我们继续为那些要参加在洛杉矶的DrupalCon的人们创建一个新页面过程。
本页将利用Bartik主题提供生成一个看起来如图10-3所示的多区域布局网页。
![](http://work.beiweng.org/d/file/drupal/chapter10/2016-04-09/ca5acbe8e5ff59b0f83549e86ed2a25e.png)
图10-3 “在洛杉矶可以做什么”页面

### 创建视图
第一步是使用基本的页面内容类型创建一个即将用到的础信息页（有关创建基本网页复习见1章。为了使事情变得有趣，我们只会为这一页输入一个标题，内容空白。在标题栏中，输入“在洛杉矶做什么”，然后单击“保存和发布”按钮。我们现在有一个空白页，标题为“在洛杉矶做什么”，没有任何其他内容，除了一些标准的在每个页面都显示的区块。
让我们创建一些块和视图，并将它们分配给该页以使其看起来像一个登录页。

首先我们来创建一个词汇表分类，命名为事件，然后在词汇表了创建一个DrupalCon Los Angeles的项，在管理菜单上点第二个按钮。点击第二项结构菜单链接，下拉菜单里点击分类链接。在分类页点击增加词汇表按钮，名称里项里输入'Event'。点击保存按钮生成事件分类页。点击“添加项”按钮，并在名称字段中输入“DrupalCon洛杉矶”创造的一个术语。点击保存，保存分类术语。 我们还需要另一个主题分类词汇表。按照创建事件分类同样的步骤，只是这一次命名的名称为“主题”，并添加一个名为所谓“可以做的事。”的项。

我们现在需要一种方法来指定一篇文章，就是他们正在写的关于在洛杉矶可以做的事情。我们可以通过在我们的文章内容类型中添加2个术语引用字段来实现这个功能，允许作者从主题和事件中选择。在“结构”页上，单击“内容类型”链接，然后单击“管理字段”链接，以满足文章内容类型。按照章节5中的“自定义您的内容类型”的一般步骤，创建两个新名词参考字段，一个事件和一个主题。作为复习，选择项的参考字段类型和字段设置”页上，选择每个字段的适当的词汇。选择“字段类型”的术语引用，并在该字段设置页中，选择每个字段的适当的词汇表。添加两个字段的字段的列表后，你应该会出现类似于图10-4所示。
![](http://work.beiweng.org/d/file/drupal/chapter10/2016-04-09/ece793228b872047b0088ecfc7599132.png)
图10-4 事件和主题字段添加到文章内容类型


下一步是创建的几篇文章，选择DrupalCon洛杉矶事件做为主题。让我们开始创建五篇文章，并使用这些文章作为创建登陆页面的基础文章。

#### 创建视图

在页面的主要内容区域，我们将创建一个最新发表的焦点在在洛杉矶做什么的五个最新发表的文章列表。我们将使用视图模块创建的文章列表，每一篇文章使用摘要显示模式给我们的网站访问者，点击“阅读更多”看到整篇文章的链接功能。用在第9章中所描述的技术，通过单击“结构”菜单项并选择视图，创建一个新的视图。点击“添加新的视图”按钮，并命名为“文章”。我们将使用这一个视图创建多个显示来创建我们想在我们的登录页上显示的输出样式。在“添加新视图”页的视图设置区域中，选择“我们希望呈现的实体类型”的文章类型，在保持默认状态及剩余的选项。单击“保存和编辑”按钮继续。

我们将创建的第一个视图显示的是最新的五篇摘要列表。单击“添加”按钮以创建一个新的显示，并从选项列表中选择“区块”。单击“显示名称”栏中的“显示名称”字段，将“显示名称”更改为“最新文章”，请单击标题栏旁边的“显示名称”，然后输入“最新文章”，以将其显示为该视图的顶部名称。接下来，对显示的设置，改变想要显示的字段内容并选择摘要的格式列表显示类型。单击“使用分页”链接，改为“显示指定数量的项目并将项目集数显示为5。最后，单击“保存”按钮。

我们将创建的第二个视图显示的是一个特色文章块。我们将随机选择一篇文章，并在页面上显示全文。要创建此视图显示，请单击“添加”按钮，然后选择“区块”。将“显示名称”改为“特色文章”和“特色文章”，确保您选择“这个Block（覆盖）”，在每个你做改变的元素顶部选择列表选择覆盖方式，否则您的更改将应用于所有视图显示。改变显示设置为摘要模式来显示文章的缩短版。下一步，单击“排序标准”中的“添加”按钮，并添加一个新的排序顺序。从“类型”下拉列表中选择“全局”，并从“全局”的“值”列表中选择“随机”，然后单击“添加”和“配置”排序标准。 保留不勾选“把这个排序显示给用户，让它们自己选择”前的复选框，单击应用按钮完成添加新的排序标准。下一步，删除后的日期（降序）”的排序标准，通过点击下拉箭头旁边的“添加链接（显示排序标准正确选择重新排列）。在“重新排序”页面，点击删除链接”相关的内容：发布日期（降序）”并点击应用按钮。接下来，改变项目的数量显示在分页器上分由5项改到1。最后，单击“保存”按钮。

我们将把我们所创造的2个区块分配给“洛杉矶做些什么”来证明我们的劳动成果。单击“结构”链接，选择“区块布局”链接。在右边的列中，你会看到可用的块列表的地方。在“列表”（视图）部分中，您将看到我们刚刚创建的2个模块。点击文章：精选文章链接并将其分配到“侧边栏”区。单击“显示页”选项卡，然后单击“显示”按钮。在文本区域中输入网页的网址。在我的情况下，我的关于“在洛杉矶可以做什么”文章的网址是在/node/7，所以这是限制这一块只在这一页显示的价值，限制这一块只在这一页显示。单击“保存”按钮。做相同步骤对最新文章：最新文章，但在这里我们选择内容区域。最后，单击“区块布局”页面底部的“保存块”按钮。接下来浏览“在洛杉矶做什么”的页面上看到我们的网页建设工作进展（见图10-5）。
![](http://work.beiweng.org/d/file/drupal/chapter10/2016-04-09/356f560e28cf395ba07960238b42afd0.png)
图10-5。网页建设进展

我们将通过增加三个附加功能的文章块，增加三个额外的文章“洛杉矶周边餐馆”来包围登陆页面。我们将显示上传的每个餐馆的图片（参见图10-1区域位置）。

我们首先需要添加一个新的术语到餐馆分类词汇表里，这样可以让我们使用2015作为洛杉矶DrupalCon事件和餐厅为主题的过滤条件。重复你之前的步骤（在4章）通过对结构➤分类添加新项。单击“添加词汇表”链接，在操作栏中的主题词汇通过点击下拉箭头旁边的列表项，然后选择Add term。在“名称”栏中输入餐厅，然后单击“保存”按钮。

下一步是创建内容。单击“二级”菜单中的“内容”链接，然后单击“添加内容”按钮。选择文章内容类型并创建三个新的文章，从文章分类列表的列表里选择Restaurants，并在三个餐厅的每篇文章上传图像。要上传图片点击浏览按钮的图像位置，找到图像上传，从列表中选择相应的文件，并点击打开按钮。

随着文章就位，我们已做好去创建显示每个餐厅的名字和图片的视图作为一个区块。回到文章视图并：

1.单击Add按钮创建一个新的区块视图。

2.给第一个块“显示名称”为“特色餐厅1。”

3.我们将要在该块的顶部显示餐厅而不是使用标题栏的默认名字，所以请单击从“标题”的顶部，从顶部的列表选择“这个Block（覆盖）”，来配置面板的标题。在文本字段显示的现有标题，并点击“应用（此显示）”按钮。

4.我们还想在我们的块显示文件而不是摘要或全部内容字段显示，所以点击内容链接到正确的显示和选择字段。其他配置保持在默认值。当我们选择字段作为显示的选项时，视图模块会自动将标题栏添加到显示的字段列表中。单击“应用”按钮返回“视图”配置页。

5.我们也要显示我们为每一个餐厅上传的图像，所以点击添加链接在领域的部分，并滚动到通过列表的领域，直到你发现“内容：显示图像在：文章。”或者，在搜索框中输入“图像”，在字段列表的顶部快速将您带到适当的字段。检查图像字段旁边的框，并将“所有显示”的“全部显示”的选项改为“这个块（覆盖）”。下一步，单击“添加字段”窗体底部的“应用（此显示）”按钮。“配置字段：内容：图像”形式将显示在下一步，让您设置图像将如何出现在块。不选中“创建标签”框中，我们不需要一个标签出现图片的上面。在“链接图像到选择列表”中，选择内容项目自动将图像超链接到该餐厅的文章中，然后单击“应用（此显示）”按钮在窗体的底部。

6.创建第一个块的下一步是设置过滤标准，以便只显示餐厅。单击“添加”按钮以过滤标准，改变选项为“这个块（覆盖），”在搜索框中输入“Term”，从字段返回的列表查找“内容：具有分类术语”框，并单击“应用（此显示）”按钮。视图显示“配置过滤准则”的形式额外的设置，允许你选择哪些词汇（选择对象）和选择型（选择下拉菜单，并选中“显示等级下拉框）。单击“应用”和“继续”按钮以进入下一个页面，从该词汇列表中选择“餐厅”，然后单击“应用（此显示）”按钮。

7.创建第一个餐厅块的最后一步是将显示的项目数量限定为一条。单击“使用分页”选项设置选项“显示指定数量的物品”和显示数值为1。

8.单击保存按钮来创建新的块。
我们需要创造更多的两个区块来显示更多的餐馆。在视图中使用复制功能，我们会使它更容易一些。选中精选的餐厅1视图显示，点击色餐厅1个右侧链接的视图配置形式复制。现在你将具有相同的名称，看到一个新的视图显示，准备修改（参见图10-6）。
![](http://work.beiweng.org/d/file/drupal/chapter10/2016-04-09/d354ff8f38353b89c0c893ebeaac3f19.png)
图10-6。复制视图显示

对于这个复制的视图，我们需要做两个修改。
1.修改“显示名称”为“特色餐厅2”，和
2.指定要显示的餐厅。

单击“显示名称”链接来改变视图的名称，将值设置为“特色餐厅2。”接着，单击“使用分页”链接将值更改为“显示特定的项目”（确保你选择“这一块（覆盖）”在选择分页”结构形式顶部下拉列表内。点击项目链接的数量并更新“项目显示”字段的值为1，“偏移量（跳过项目的数量）”内容输入1的。在选择要显示的项目之前，想好项目的偏移量作为选择的偏移数。因为这个特定的块应该显示在列表中的第二餐厅，我们将改变偏移值为1，意思是，跳过第一个和显示第二个。完成特色餐厅2块后，点击复制特色餐厅2的按钮，按照相同的步骤，以更新复制的特色餐厅3块使用“特色餐厅2”作为“显示名称”和2的值为偏移量。

在建设我们的页面的下一步是地方特色餐饮街区页面的特色底部区域（见图10-1）。访问“区块布局”页（点击结构页的“区块布局”链接，选择“文章：特色餐厅1”块中的“放置区块”按钮。选择“精选的底部第1”作为该块分配的区域，点击“为下列页面显示”的按钮，在文本区域并输“在洛杉矶做什么”的URL地址，来实现“显示块在特定的网页上。”

### 总结

重复这些步骤制作特色餐厅2和3区域，将它们放置在精选的底部和特色的底部第三个区域。添加的特色餐厅的区域在特色底部区域效果如图10-7所示。
![](http://work.beiweng.org/d/file/drupal/chapter10/2016-04-09/36126cf8e3be62cfd752883910c983ec.png)


你可以继续创建显示其他内容列表附加视图，添加其他自定义模块，或寻找模块生成块，增加这个页面上的内容（例如，谷歌地图和Yelp），但现在我们将标记为完成建设任务的“做什么在洛杉矶”页面。
#### 总结：

在本章中，我们将主题、内容类型、内容、块和视图合并成一个解决方案，用于在我们的站点上创建复杂的页面。我们将使用这些技术在章节19至22为我们建立各种Drupal 8网站。

下一步，我们将探讨通过增加贡献的模块，扩大我们的网站的功能。