## 视图 

 如果你问使用过Drupal一段时间的人，什么是必杀技模块。这个答案很可能是视图，面板，或者自定义内容类型。在这个列表中，视图通常是最先提到的。很多用户说不能没有视图模块。视图模块有什么特别的地方昵？简单的说，视图为你提供了一个易于选择和操作的界面,用于显示在你网站的内容列表。

你可能使用的视图示例

* 在你的网站显示最新发布的文章，通过时间进行升降排序。
* 在一张表中列出许多公司的地理位置，通过点击公司地理位置，城市，州和国家的标题进行排序
* 显示图片库
* 显示幻灯片
* 显示日历
* 显示博客文章列表，并通过主题进行筛选
* 创建一个RSS feed，呈现你的网站最新发布的最新内容
* 显示你能想到的任何类型的的列表，创建表单和内容并储存在你的网站中，像列表，RSS feed，在第五章钟，我们创建事件内容类型。让我们创建一些时间列表，并把它放在工作中。将对访问者使用视图模块是有帮助的。如果你没有完成第五章的。现在是一个极好的时间回到第五章。通过实例来工作。以便于有所需的内容来支持你将来的活动

## 视图模块

视图模块在Drupal8中是核心模块，默认情况下已安装并开启。
为了验证视图模块已经安装并开启，点击页面上的管理链接中扩展选项中的子菜单。在扩展页面搜索功能。输入视图进行搜索。如果这个视图模块存在，你应该看到2个模块列表 如图 9-1 所示。如果复选框没有被勾选。请勾选并点击"保存配置"按钮。

![Mou icon](http://work.beiweng.org/d/file/drupal/chapter9/2016-04-09/1b0e682045aabe6f4a601c7f3712d791.png)

			图9-1。验证查看已安装并启用
			
这个视图模块是幕后组件。用来从处理数据库中的读取的内容，并显示出来。这个视图UI模块，UI在这代表用户界面。是管理员创建和配置形成视图界面。我们将在本章其余的部分来讲解视图UI。

## 创建一个视图

随着视图安装并开启。我们已经准备好了。但是一个视图没有内容，那么，仅仅是一个空白页。所有第一步创建一些内容。在本章我们已经有几篇先前创建好的文章。所有让我们使用这些作为我们首次涉足的观点。如果你跳过前面的练习或者已经删除那些你创建的文章。然后在花一点时间创建几篇。

我们现在已经创建一个文章列表的视图。点击页面上的管理链接，在二级菜单结构链接中的视图链接。它将跳转到视图管理界面。你将在页面上看到几个已有的观点。这些观点时Drupal的核心组成部分，提供最新的内容列表，最近的评论，新用户，谁在线，以及其他的信息。如果你通过第八章的学习，你会认识到这些观点。像这些观点，我们会在这一章节使用几个区块来展示。

要添加一个视图，在页面上点击“添加新的视图”按钮。它揭示了一个新的视图(参见图9-2)。在这页，定义如下：

* 视图名称：这个名称必须是唯一的(尚未在网站中另一个视图中使用)。选择一个描述名称是一个好主意，让其他人看到这个列表描述可以更轻松正确的使用描述名称。对于第一种观点，用最近的文章最为名称。
* 说明：这又是一个字段，你可以使用它来提供更多视图信息。勾选旁边的描述，然后输入“网站上发布的的最新文章列表”。
* 查看设置：这组字段定义将由什么类型的内容来呈现视图。如果你点击展示列表，你将看到不同的选项，例如内容，日志，文件，评论，内容修改版本，分类(术语)，和用户。我门的观点聚焦在文章类容。在标记字段限制我们的提供的视图仅仅包含这些条款。我们将跳过标签字段到排序选项。选择未分类(我将在后面来整理这个例子)。

## 创建你的第一个视图

* 页面设置：视图提供创建内容的列表功能，在你的网站上通过一个URL访问一个单独的列表页面的的功能。出于演示，勾选"创建一个页面"框。你必须填写页面标题(或者般流默认值)和输入链接到列表中的URL路径(或保留默认值)。在显示的格式中，类似于没有格式化列表中的摘要，设置项目呈现10条条目数量。点击分页，它将呈现文章列表。如果 在文章列表超过10篇文章，一个分页器将出现在文章列表底部，以便于浏览者查看所有的文章，每页仅显示10篇文章。
* 区块设置：虽然我们学习了区块在第八章。但是出于学习的目的。我们将允许我们的视图创建一区块(放在一个页面的任何地方)。显示该区块最新的三个事件。点击"创建一个区块"框，输入区块标题名称(或保持默认值)，将保留格式保留为格式化标题列表名称(链接)。将项目组第三个“使用这个”复选框选中。

![Mou icon](http://work.beiweng.org/d/file/drupal/chapter9/2016-04-09/b0f1bed735fc8b23827ca4154d55259c.png)

				图9-2。创建新视图	
				
点击“保存并修改”按钮。会跳转到下一个配置视图页面。如图9-3所示。


![Mou icon](http://work.beiweng.org/d/file/drupal/chapter9/2016-04-09/47751063535d35a7d69b5c4d8028ccde.png)

				图9-3。视图编辑页面
				
乍一看，定义一个视图的形式看起来很复杂，幸运的事，这是表面的假象。

首先你将会看到视图配置上的一个列表，在我们的例子里，我们有一个页面和一个区块。视图的强大功能之一是一个单一的视图可以呈现多个显示的功能。我们可能会使用的最近的文章类型作为例子，它包括：

* 在网站上显示所有文章，并显示每一篇发布的文章详情。
* 一个区块列出最近5篇文章，每一篇文章只显示的标题 
* 另一个区块显示最近5篇文章，每一篇文章显示的标题和内容简介
* 还有一个区块显示最近10篇文章，显示文章的标题，发布日期，编写作者和内容简介。

这是一个简单的视图用于创建几种不同内容类型，每个类型在文章中都呈现不同的格式。

我们将开始定义2个显示区，页面和区块。当我们第一次选择配置视图(参见图9－2），它们将通过视图自动被创建。__通过前两个步骤的工作，我们将添加到显示列表__。

##页面显示

首先让我们定义这个页面显示。点击页面显示配置下面的__页面__按钮，在页面之上我们将完成文章的标题，内容，作者，发布状态和时间及日期。让我们从上到下，从左到右配置我们需要的页面显示参数。

1. 从修改页面显示的名称到到更多的描述，像"所有文章页面"，到改变这个值，点击"__页面__"右侧的页面名称。并在弹出框中的管理描述字段输入新的值。接着点击应用按钮。我们将看到这个新的值.呈现在视图编辑区域并左侧栏位"显示名称字段"视图名字字段的左侧栏。
2. 在这个区域，改变视图的的标题，这个值会在视图顶部直接输出。然而让我们改变"所有文章"。点击"最近的文章"，从列表中选中"此页面(覆盖)"，这个意味着我们改变的这个值仅仅应用这个特别的视图显示。如果你设置成"显示所有",每一个视图都将显示这个新的标题。因为不同的目的，我们会有不同的显示。"所有文章"在选择标题后，对其他显示器是不友好的。
3. 在格式区域。我们可以使用有不同的输出生成一个列表。点击"格式化的列表"会看到一个输出格式列表选项：

	* 网格(表格)：输出显示行和列。在我们的例子中，每一篇文章将填充一行网格(表格)。对于图片库这是一个好的选择显示图片。
	* HTML列表：输出一个有序或者无序列表。在我们的例子中，每一篇文章将会显示在列表中封闭的"__ol__ __li__" 或者 "__ul__" 标签内。如果没有类似的HTML标签，如果你不熟悉HTML标签,在<http://www.w3schools.com/html>查看这个伟大的教程或者拿起一本伟大HTML开发入门书籍在<http://www.apress.com>。
	* 表：作为一个HTML输出显示。每一个字段显示一列。当你想提供一列的值来排序输出表，这是一个好的表。
	* 没有格式化的列表：作为一个列表显示，但是不像HTML列表，这儿没有 __ul__ , __ol__ 或者 __li__ 标签。在我们的页面例子中，我们设置无序列表。当改变这个值除了"没有格式化列表",记住在这个列表中选中"此页(覆盖)".如果你点击设置右侧的"没有格式化的列表"，你将看到这个配置所有的有效的类型选项。每一个参数都有自己的选项供你设置。
4. 在格式部分，我们定义了参数要如何处理我们想要展示的内容。内容和字段时最常用的内容选项。
	* 内容：显示当前正在选择的完整实体。在这些文章案例中，这个完成的文章将被展示出来。
	* 字段：使你显示特别的字段的实体进行渲染。在我们的例子中，我们正在选择和现实的文章。我们可以有一个我们想要展示的文章标题和发布日期视图。使用字段选项，我们可以展示特别的字段，以及这些字段在页面的显示顺序。在我们的页面例子中。我们将选择内容展示。像摘要，一个文章截取版本，显示600字符集。当我们在摘要模式定义了我们要设置的页面显示内容。所有展示我们已经设定的值。如果我们想要通过这个视图来渲染这个实体文章。我们点击这个摘要文字，__ 在视图模式列表中默认为"默认值"中选择. __ 。对于我们示范的目的，在显示模式中设置摘要显示。
5. 在我们的例子中，这个字段配置参数没有被显示，因为我们将显示整个文章。当我们创建显示区块，在本章之后，我们将覆盖这些字段。
6. 过滤标准在下一个配置区域。你可以通过添加视图显示的过滤标准，来渲染这个内容显示。当我们创建这个视图(参见图9－2)时，在第一个配置屏幕上，我们选中这个视图，并设置仅显示文章。通过选择文章，我们设置了一个过滤仅仅显示文章内容类型。此外，视图也为发布(未发布)的内容创建过滤条件。在我们的视图中我们会添加别的过滤标准；例如，在文章案例中，我们可能想一个显示视图仅仅展示最近30天发布的文章。我们可以通过添加任何一方面的过滤标准来限制储存在项目中值的输出。出于演示的目的，我们将当读设置过滤标准。当我们创建显示区块时，在本章之后将覆盖添加的的过滤标准。
7. 这个排序部分提供了特定的内容列表排序。在默认情况下，这个值将通过节点ID(通常在Drupal内容项目中的唯一标示)的顺序排序。你想要设置一个标题排序标准，按照这个列表你想按照字母排序，或者通过最新发布的文章列表的日期排序。让我们在标题中添加一个排序标准。点击排序标签右侧的添加按钮，你将在你的网站上看到你定义的所有字段的一个完整列表，__ 我们想要过滤这个列表名字中的"标题"。_ 。这样做，进入"标题"来搜索字段和在列表字段中选择"内容：标题"，向下滚动，知道你发现 __内容：标题__,检查该字段的复选框，在本页顶部选择之的改变，然后点击"应用"按钮。在下一个屏幕允许设置这个排序，上升或者下降，也向网站访问者公开这个选项。在这个实例页面中，不检查没有选择的复选框。我们想要按照这个标题排序。点击"应用(显示)"按钮继续。滚动到屏幕底部，你现在应该看到这个页面将如何输出显示。

Page Display
In the second column of configuration options (refer to Figure 9-3), we’ll begin
by defining the Page Settings for our example.
121







