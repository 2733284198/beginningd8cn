---
title: Drupal中块使用指南
date: 2016-04-21 17:18:25
tags: [Drupal]
---

# 第八章 : Drupal中块使用指南

在本章中，我重点介绍如何使用块来分配内容，在网页上的特定位置上通常被称为“小工具”（包括用户登录表单，最新的博客文章，当前登录到您的网站的名单，目前天气情况，等等。。。）我将介绍Drupal8的标准块，附带贡献模块，以及如何建立一个全新的自定义块。在本章的最后，你拥有能用相当多令人兴奋地功能写网页的能力。


<!--more-->
## 多个块

块是一个术语，是自己包含的内容，菜单，或者代码的总称。Drupal 8附带的标准预置模块包括：“用户登录”块，搜索块，“谁在线“块，”最新用户“块，”最新内容“块，等等。也其他的块与贡献模块，例如块共享最新的天气报告的块，你最近Twitter的职位申请块，或您当前的Facebook状态块。作为网站管理员，您可以构建自己的自定义块，如即将到来的事件列表。

### 在页面上用块

在第6章我介绍了主题的结构和主题如何在页面定义“区块”。图6-1展示了主题被分成边栏一，边栏二，精选热门，内容区，和其他几个区。现在我会告诉你如何您的主题各个区分配一个或几十块到各个区。并解释这样做通过提供有趣的、高价值的功能增加你的网站访客。图8-1是在一个页面上用块分配各种区的一个例子。这个页面有七个块。

![block](http://work.beiweng.org/d/file/drupal/chapter8/2016-04-09/cf437fd5afe119ea45682b4c1cea4e73.png)Figure 8-1. See if you can spot the blocks
### 寻找可用块的列表
这个例子包括一个菜单块（导航栏），交互式块（搜索框和用户登录），和信息块（谁是新用户，最近的内容，最近的评论和Drupal技术支持）。让我们来看看Drupal8附带的块，在你的网站上指定几个区块的区域。然后，我们将安装一个或两个能提供超爽功能的块的模板，您可以添加到您的网站，然后我们将从头开始创建一个全新的自定义模块。### 找到可用的名单在你的网站上去找可供你使用的模块列表，点击管理链接页面的顶部，然后点击二级菜单结构链接。这把你带到结构页面。在结构页面，点击“块状布局”链接，显示了“块状布局”页，其中列出了所有你的系统上所定义的模块，包括那些已分配给和那些没有分配到的区域。见图8-2。### 重新排列块

![](http://llwoll.github.io/2016/04/21/Drupal%E4%B8%AD%E5%9D%97%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/rearranging_block.png)在“块状布局”页面中，您将看到的Drupal8提供了一些可以放在网站上的网页预构建块。在页面的右边一栏，从块列表中选择在“广场块”框中选择几个列表项。点击这个列表的标题，在“配置块”表单，从选择列表中选择一个区域（例如，如果你使用的是Bartik主题首先是选中侧边栏，）。分配块的区域后，点击“保存块”按钮。如果您返回到您的网站的主页，你会看到你分配的块在指定区域激活。### 重新排列就像在某个时间点上，你想要重新排列显示在页面上模快。在前面图8-1所示的例子中，我们想要让“最新内容”和“最新评论”模块出现的“最新用户”块上面。要重新排序块，如前节所述定位到“块状布局”页面。在“块状布局”页面，如图8-2所示，只需点击并按住加号（+）旁边要移动的块，将该块拖动到指定位置。当您松开鼠标按钮时，你会看到Drupal的重新排列成果（暂时性的）。您将在块说明的列表的顶部看到一条消息，“你有未保存的更改。”滚动到页面的底部，并点击“保存块”。Drupal将保存更改并显示一个消息。通过点击页面左上角的“回到网站”链接返回主页，你会看到修改成功的模块。
### 分配和取消块
Drupal还提供了一个块移动到不同的区域和去激活一个在网页上已见模块的机制。要进行更改，浏览到“块状布局”页面（结构➤座布局）。在“块状布局”页面（参见图8-2）在下拉列表中，找到<无>选项。紧接着选择<无>，该项目将从“块状布局”页面的区域消失，将出现在页面中的禁用部分的底部。接下来，单击您分配给区块的另一个区域下拉列表，并从选择列表中选择不同的区域。这个心选择的块将移动到新分配的区域中的块列表内，并且它会显示在列表的顶部。进行更改之后，滚动到页面的底部，并点击“保存块”，这将更改提交到Drupal数据库。重温您的网站的主页，你会看到你刚才所做的更改后的页面。## 配置块
![](http://llwoll.github.io/2016/04/21/Drupal%E4%B8%AD%E5%9D%97%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/configure_block.png)您可以在“配置块”页中选中不同的配置。配置选项包括重写该块的标题和设定块的基于几个可选参数的可见性。作为你可能会在将来使用这些功能的例子，让我们来修改“最新用户”块，使其只在您的网站的主页上显示，只有当访问者是使用ID和密码登录的系统用户才可见。为了改变这些，定位到“块状布局”页面，找到“最新用户”块。如果你还没有为那个块分配区域，按照上一节中的步骤，现在这样做。接下来，单击块的配置链接。来到了模块的配置页面。参见图8-3。## 使用贡献模块中快
确实有数以千计贡献模块可用于Drupal。许多这些模块的生成块作为其显示信息给观众，如当地的天气。如果该模块已安装并在您的网站启用，由该模块生成的块将出现在“块状布局”页面上。根据本章前面所述只用把需要把块放在相应的区。如果您尚未安装该模块，按照第11章所列的步骤操作。采用贡献模块块的一个例子是Wunderground天气块显示器展示的天气预报（见图8-6）。![](http://llwoll.github.io/2016/04/21/Drupal%E4%B8%AD%E5%9D%97%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/weather_module.png)
  图8-6。伦敦的天气（或任何其他城市！），现在可在你的网站上显示
  
  
  有数以百计的生成块模块。访问www.drupal.org/project/project_module和浏览列表。
  
## 创建自定义模块  
  
  
  有可能是你需要一个块，甚至浏览了贡献模块列表后，你无法找到任何符合您特殊要求的模块。在这种情况下，您可以创建一个自定义模块。自定义模块可以包含静态HTML和JavaScript的任意组合并且可以像下面的或更复杂，你想让它成为哪样都行。 为了演示创建一个自定义模块，我们将创建一个显示的“Hello World！”的例子，静态HTML文本虽然它可能不会是那么令人兴奋的，但是它确实说明了创建一个新块的过程。第一步是定位回到“块状布局”页面。一旦出现（参见图8-2），点击页面左上角的“自定义块库”选项卡。在“自定义块库”页面，点击“添加自定义模块”按钮。
  
  
   
### 创建
![](http://llwoll.github.io/2016/04/21/Drupal%E4%B8%AD%E5%9D%97%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/create_block.png)


图8-7。自定义块的块设置保存块后，点击页面的顶部的“阻止布局”选项卡，在自定义类别下“放置块”对话框中寻找新建立的块。点击你创建的块的名称然后分配到页上的区域。单击“保存块按钮”，并返回到您的网站主页，你会看到在你所指定的区域上创建的块（见图8-8）。## 总结
块是用于让创建和显示在您的网站动态内容和互动功能增强的强大的机制。在本章中，我们探讨了Drupal8附带的块，使用贡献模块，以及如何从头开始创建一个自定义模块。在下一张中，我们将继续介绍其他主题来使用块。
----
   本文由Athena 负责翻译,我最终整理成Markdown 格式 .
  
  
  
  
  
  
  
  
